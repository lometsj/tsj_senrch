cscope 15 /mnt/c/Users/tsj/Documents/tsj_senrch/test_c_file -q 0000000063 0000004443
	@test.c

1 
	~<¡dio.h
>

2 
	~<¡ršg.h
>

3 
	~<time.h
>

4 
	~<¡dlib.h
>

6 
	#LOG_FILE
 "·sswÜd_log.txt"

	)

7 
	#MAX_PASSWORD_LENGTH
 100

	)

10 
´št_log
(cÚ¡ *
mes§ge
);

11 
´oûss_·sswÜd
(cÚ¡ *
·sswÜd
);

12 
v®id©e_šput
(cÚ¡ *
šput
);

13 
³rfÜm_exŒa_İ”©iÚs
(
v®ue
);

14 
ÿlcuÏ‹_checksum
(cÚ¡ *
d©a
);

15 
hªdË_¥ecŸl_ÿ£
(
cÚd™iÚ
);

16 
log_sy¡em_šfo
();

17 
g’”©e_»pÜt
();

18 
š™Ÿlize_sy¡em
();

19 
ş—nup_»sourûs
();

21 
	$maš
() {

22 
	`š™Ÿlize_sy¡em
();

24 
·sswÜd
[
MAX_PASSWORD_LENGTH
];

25 
	`´štf
("è¯·è¾“å…¥å¯†ç : ");

26 
	`fg‘s
(
·sswÜd
, 
MAX_PASSWORD_LENGTH
, 
¡dš
);

27 
·sswÜd
[
	`¡rc¥n
(password, "\n")] = '\0';

29 
	`v®id©e_šput
(
·sswÜd
);

30 
	`´oûss_·sswÜd
(
·sswÜd
);

32 
	`g’”©e_»pÜt
();

33 
	`ş—nup_»sourûs
();

36 
	}
}

38 
	$š™Ÿlize_sy¡em
() {

40 
	`´štf
("ç³»ç»Ÿåˆå§‹åŒ–ä¸­...\n");

42 
i
 = 0; i < 5; i++) {

43 
	`³rfÜm_exŒa_İ”©iÚs
(
i
);

45 
	`log_sy¡em_šfo
();

46 
	}
}

48 
	$log_sy¡em_šfo
() {

50 
time_t
 
now
 = 
	`time
(
NULL
);

51 
tm
 *
loÿl_time
 = 
	`loÿÉime
(&
now
);

52 
time_¡r
[100];

53 
	`¡ráime
(
time_¡r
, Ñime_¡r), "%Y-%m-%d %H:%M:%S", 
loÿl_time
);

55 
sy¡em_šfo
[256];

56 
	`¥rštf
(
sy¡em_šfo
, "ç³»ç»Ÿä¿¡æ¯è®°å½•æ—¶é—´: %s", 
time_¡r
);

57 
	`´št_log
(
sy¡em_šfo
);

58 
	}
}

60 
	$v®id©e_šput
(cÚ¡ *
šput
) {

62 ià(
šput
 =ğ
NULL
 || 
	`¡¾’
(input) == 0) {

63 
	`´št_log
("é”™è¯¯: è¾“å…¥ä¸ºç©º");

64 
	`ex™
(1);

68 
i
 = 0; i < 
	`¡¾’
(
šput
); i++) {

69 ià(
šput
[
i
] == ';' || input[i] == '|' || input[i] == '&') {

70 
	`´št_log
("è­¦å‘Š: è¾“å…¥åŒ…å«ç‰¹æ®Šå­—ç¬¦");

74 
	}
}

76 
	$´oûss_·sswÜd
(cÚ¡ *
·sswÜd
) {

78 
	`´štf
("å¤„ç†å¯†ç ...\n");

81 
has_uµ”
 = 0, 
has_low”
 = 0, 
has_dig™
 = 0, 
has_¥ecŸl
 = 0;

82 
i
 = 0; i < 
	`¡¾’
(
·sswÜd
); i++) {

83 ià(
	`isuµ”
(
·sswÜd
[
i
])è
has_uµ”
 = 1;

84 ià(
	`i¦ow”
(
·sswÜd
[
i
])è
has_low”
 = 1;

85 ià(
	`isdig™
(
·sswÜd
[
i
])è
has_dig™
 = 1;

86 
has_¥ecŸl
 = 1;

89 
¡»ngth
 = 
has_uµ”
 + 
has_low”
 + 
has_dig™
 + 
has_¥ecŸl
;

90 
¡»ngth_¡r
[50];

91 
¡»ngth
) {

93 
	`¥rštf
(
¡»ngth_¡r
, "å¯†ç å¼ºåº¦: å¼±");

96 
	`¥rštf
(
¡»ngth_¡r
, "å¯†ç å¼ºåº¦: ä¸­");

99 
	`¥rštf
(
¡»ngth_¡r
, "å¯†ç å¼ºåº¦: å¼º");

102 
	`¥rštf
(
¡»ngth_¡r
, "å¯†ç å¼ºåº¦: éå¸¸å¼º");

105 
	`¥rštf
(
¡»ngth_¡r
, "å¯†ç å¼ºåº¦: æœªçŸ¥");

107 
	`´št_log
(
¡»ngth_¡r
);

110 
checksum
 = 
	`ÿlcuÏ‹_checksum
(
·sswÜd
);

111 
checksum_¡r
[50];

112 
	`¥rštf
(
checksum_¡r
, "å¯†ç æ ¡éªŒå’Œ: %d", 
checksum
);

113 
	`´št_log
(
checksum_¡r
);

116 
	`hªdË_¥ecŸl_ÿ£
(
¡»ngth
 >= 3);

119 
log_mes§ge
[200];

120 
	`¥rštf
(
log_mes§ge
, "è®°å½•å¯†ç : %s", 
·sswÜd
);

121 
	`´št_log
(
log_mes§ge
);

122 
	}
}

124 
	$hªdË_¥ecŸl_ÿ£
(
cÚd™iÚ
) {

126 ià(
cÚd™iÚ
) {

127 
	`´štf
("æ‰§è¡Œç‰¹æ®Šæƒ…å†µå¤„ç†...\n");

128 
i
 = 0; i < 3; i++) {

129 
	`³rfÜm_exŒa_İ”©iÚs
(
i
 * 2);

132 
	`³rfÜm_exŒa_İ”©iÚs
(42);

134 
	}
}

136 
	$ÿlcuÏ‹_checksum
(cÚ¡ *
d©a
) {

138 
checksum
 = 0;

139 
i
 = 0; i < 
	`¡¾’
(
d©a
); i++) {

140 
checksum
 +ğ
d©a
[
i
];

142  
checksum
 % 100;

143 
	}
}

145 
	$³rfÜm_exŒa_İ”©iÚs
(
v®ue
) {

147 
	`´štf
("æ‰§è¡Œé¢å¤–æ“ä½œï¼Œå€¼: %d\n", 
v®ue
);

150 
»suÉ
 = 
v®ue
 * 3 + 7;

151 ià(
»suÉ
 % 2 == 0) {

152 
»suÉ
 /= 2;

154 
»suÉ
 = (result + 1) / 2;

157 
İ”©iÚ_log
[100];

158 
	`¥rštf
(
İ”©iÚ_log
, "é¢å¤–æ“ä½œç»“æœ: %d", 
»suÉ
);

159 
	`´št_log
(
İ”©iÚ_log
);

160 
	}
}

162 
	$´št_log
(cÚ¡ *
mes§ge
) {

164 
FILE
 *
fe
 = 
	`fİ’
(
LOG_FILE
, "a");

165 ià(
fe
 =ğ
NULL
) {

166 
	`³¼Ü
("æ— æ³•æ‰“å¼€æ—¥å¿—æ–‡ä»¶");

170 
time_t
 
now
 = 
	`time
(
NULL
);

171 
tm
 *
loÿl_time
 = 
	`loÿÉime
(&
now
);

172 
time_¡r
[100];

173 
	`¡ráime
(
time_¡r
, Ñime_¡r), "%Y-%m-%d %H:%M:%S", 
loÿl_time
);

175 
	`årštf
(
fe
, "[%s] %s\n", 
time_¡r
, 
mes§ge
);

176 
	`fşo£
(
fe
);

177 
	}
}

179 
	$g’”©e_»pÜt
() {

181 
	`´štf
("ç”ŸæˆæŠ¥å‘Š...\n");

184 
i
 = 0; i < 10; i++) {

185 
	`³rfÜm_exŒa_İ”©iÚs
(
i
 * 5);

188 
»pÜt_mes§ge
[100];

189 
	`¥rštf
(
»pÜt_mes§ge
, "æŠ¥å‘Šç”Ÿæˆå®Œæˆ");

190 
	`´št_log
(
»pÜt_mes§ge
);

191 
	}
}

193 
	$ş—nup_»sourûs
() {

195 
	`´štf
("æ¸…ç†èµ„æº...\n");

198 
i
 = 0; i < 3; i++) {

199 
	`³rfÜm_exŒa_İ”©iÚs
(
i
 + 100);

202 
ş—nup_mes§ge
[100];

203 
	`¥rštf
(
ş—nup_mes§ge
, "èµ„æºæ¸…ç†å®Œæˆ");

204 
	`´št_log
(
ş—nup_mes§ge
);

205 
	}
}

	@
1
.
0
1
7
test.c
